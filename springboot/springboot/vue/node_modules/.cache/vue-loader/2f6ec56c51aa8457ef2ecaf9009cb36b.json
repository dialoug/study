{"remainingRequest":"D:\\code\\JAVA\\SpringBoot+VUE\\医院在线挂号系统\\springboot\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\JAVA\\SpringBoot+VUE\\医院在线挂号系统\\springboot\\vue\\src\\views\\doctor\\Deal.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\code\\JAVA\\SpringBoot+VUE\\医院在线挂号系统\\springboot\\vue\\src\\views\\doctor\\Deal.vue","mtime":1698901535698},{"path":"D:\\code\\JAVA\\SpringBoot+VUE\\医院在线挂号系统\\springboot\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698897685620},{"path":"D:\\code\\JAVA\\SpringBoot+VUE\\医院在线挂号系统\\springboot\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1698897686204},{"path":"D:\\code\\JAVA\\SpringBoot+VUE\\医院在线挂号系统\\springboot\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698897685620},{"path":"D:\\code\\JAVA\\SpringBoot+VUE\\医院在线挂号系统\\springboot\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1698897685313}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJEZWFsIiwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZm9ybTogdGhpcy4kcm91dGUucGFyYW1zLnBhdGllbnQsDQogICAgICBkcnVnRGF0YTogW10sDQogICAgICBkcnVnTGlzdDogW10sDQogICAgICBkcnVnVG90YWxQcmljZTogMCwNCiAgICAgIGRydWdUb3RhbDogMCwNCiAgICAgIGRydWdQYWdlTnVtOiAxLA0KICAgICAgZHJ1Z1BhZ2VTaXplOiA0LA0KICAgICAgZHJ1Z05hbWU6ICIiLA0KICAgICAgY2hlY2tzRGF0YTogW10sDQogICAgICBjaGVja3NMaXN0OiBbXSwNCiAgICAgIGNoZWNrc1RvdGFsUHJpY2U6IDAsDQogICAgICBjaGVja3NUb3RhbDogMCwNCiAgICAgIGNoZWNrc1BhZ2VOdW06IDEsDQogICAgICBjaGVja3NQYWdlU2l6ZTogNCwNCiAgICAgIGNoZWNrc05hbWU6ICIiLA0KICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLA0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmRydWdQYWdlKCkNCiAgICB0aGlzLmNoZWNrc1BhZ2UoKQ0KICAgIGNvbnNvbGUubG9nKCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGRydWdQYWdlKCkgew0KICAgICAgdGhpcy5yZXF1ZXN0LmdldCgnL2RydWcvcGFnZScsIHsNCiAgICAgICAgcGFyYW1zOiB7DQogICAgICAgICAgcGFnZU51bTogdGhpcy5kcnVnUGFnZU51bSwNCiAgICAgICAgICBwYWdlU2l6ZTogdGhpcy5kcnVnUGFnZVNpemUsDQogICAgICAgICAgbmFtZTogdGhpcy5kcnVnTmFtZQ0KICAgICAgICB9DQogICAgICB9KS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMuZHJ1Z0RhdGEgPSByZXMuZGF0YS5yZWNvcmRzDQogICAgICAgIHRoaXMuZHJ1Z1RvdGFsID0gcmVzLmRhdGEudG90YWwNCiAgICAgIH0pDQogICAgfSwNCiAgICByZXNldERydWcoKSB7DQogICAgICB0aGlzLmRydWdOYW1lID0gIiINCiAgICAgIHRoaXMuZHJ1Z1BhZ2UoKQ0KICAgIH0sDQogICAgaGFuZGxlRHJ1Z1NpemVDaGFuZ2UocGFnZVNpemUpIHsNCiAgICAgIHRoaXMuZHJ1Z1BhZ2VTaXplID0gcGFnZVNpemUNCiAgICAgIHRoaXMuZHJ1Z1BhZ2UoKQ0KICAgIH0sDQogICAgaGFuZGxlRHJ1Z0N1cnJlbnRDaGFuZ2UocGFnZU51bSkgew0KICAgICAgdGhpcy5kcnVnUGFnZU51bSA9IHBhZ2VOdW0NCiAgICAgIHRoaXMuZHJ1Z1BhZ2UoKQ0KICAgIH0sDQogICAgYXBwZW5kRHJ1Zyhyb3cpIHsNCiAgICAgIGxldCBkcnVnID0gdGhpcy5kcnVnTGlzdC5maW5kKHYgPT4gdi5pZCA9PT0gcm93LmlkKQ0KICAgICAgaWYgKCFkcnVnKSB7DQogICAgICAgIHJvdy50b3RhbCA9IHJvdy5wcmljZQ0KICAgICAgICByb3cubnVtYmVyID0gMQ0KICAgICAgICB0aGlzLmRydWdMaXN0LnB1c2gocm93KQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgZHJ1Zy5udW1iZXIgKz0gMQ0KICAgICAgICBkcnVnLnRvdGFsID0gZHJ1Zy50b3RhbCArIGRydWcucHJpY2UNCiAgICAgIH0NCiAgICAgIHRoaXMuZHJ1Z1RvdGFsUHJpY2UgPSAwDQogICAgICB0aGlzLmRydWdMaXN0LmZvckVhY2godiA9PiB7DQogICAgICAgIHRoaXMuZHJ1Z1RvdGFsUHJpY2UgKz0gdi50b3RhbA0KICAgICAgfSkNCiAgICB9LA0KICAgIHJlbW92ZURydWcocm93KSB7DQogICAgICB0aGlzLmRydWdMaXN0LnNwbGljZSh0aGlzLmRydWdMaXN0LmluZGV4T2Yocm93KSwgMSkNCiAgICAgIHRoaXMuZHJ1Z1RvdGFsUHJpY2UgLT0gcm93LnRvdGFsDQogICAgfSwNCiAgICBjaGVja3NQYWdlKCkgew0KICAgICAgdGhpcy5yZXF1ZXN0LmdldCgnL2NoZWNrcy9wYWdlJywgew0KICAgICAgICBwYXJhbXM6IHsNCiAgICAgICAgICBwYWdlTnVtOiB0aGlzLmNoZWNrc1BhZ2VOdW0sDQogICAgICAgICAgcGFnZVNpemU6IHRoaXMuY2hlY2tzUGFnZVNpemUsDQogICAgICAgICAgbmFtZTogdGhpcy5jaGVja3NOYW1lDQogICAgICAgIH0NCiAgICAgIH0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgdGhpcy5jaGVja3NEYXRhID0gcmVzLmRhdGEucmVjb3Jkcw0KICAgICAgICB0aGlzLmNoZWNrc1RvdGFsID0gcmVzLmRhdGEudG90YWwNCiAgICAgIH0pDQogICAgfSwNCiAgICByZXNldENoZWNrcygpIHsNCiAgICAgIHRoaXMuY2hlY2tzTmFtZSA9ICIiDQogICAgICB0aGlzLmNoZWNrc1BhZ2UoKQ0KICAgIH0sDQogICAgaGFuZGxlQ2hlY2tzU2l6ZUNoYW5nZShwYWdlU2l6ZSkgew0KICAgICAgdGhpcy5jaGVja3NQYWdlU2l6ZSA9IHBhZ2VTaXplDQogICAgICB0aGlzLmNoZWNrc1BhZ2UoKQ0KICAgIH0sDQogICAgaGFuZGxlQ2hlY2tzQ3VycmVudENoYW5nZShwYWdlTnVtKSB7DQogICAgICB0aGlzLmNoZWNrc1BhZ2VOdW0gPSBwYWdlTnVtDQogICAgICB0aGlzLmNoZWNrc1BhZ2UoKQ0KICAgIH0sDQogICAgYXBwZW5kQ2hlY2tzKHJvdykgew0KICAgICAgdGhpcy5jaGVja3NMaXN0LnB1c2gocm93KQ0KDQogICAgICB0aGlzLmNoZWNrc1RvdGFsUHJpY2UgPSAwDQogICAgICB0aGlzLmNoZWNrc0xpc3QuZm9yRWFjaCh2ID0+IHsNCiAgICAgICAgdGhpcy5jaGVja3NUb3RhbFByaWNlICs9IHYucHJpY2UNCiAgICAgIH0pDQogICAgfSwNCiAgICByZW1vdmVDaGVja3Mocm93KSB7DQogICAgICB0aGlzLmNoZWNrc0xpc3Quc3BsaWNlKHRoaXMuY2hlY2tzTGlzdC5pbmRleE9mKHJvdyksIDEpDQogICAgICB0aGlzLmNoZWNrc1RvdGFsUHJpY2UgLT0gcm93LnByaWNlDQogICAgfSwNCiAgICBzYXZlKCkgew0KICAgICAgaWYgKHRoaXMuZHJ1Z0xpc3QubGVuZ3RoID4gMCkgew0KICAgICAgICB0aGlzLmZvcm0uZHJ1ZyA9ICcnDQogICAgICAgIHRoaXMuZHJ1Z0xpc3QuZm9yRWFjaCh2ID0+IHsNCiAgICAgICAgICB0aGlzLmZvcm0uZHJ1ZyArPSB2Lm5hbWUgKyAnKicgKyB2LnByaWNlICsgJyonICsgdi5udW1iZXIgKyAnICcNCiAgICAgICAgfSkNCiAgICAgICAgdGhpcy5mb3JtLmRydWcgKz0gJyDoja/nianmgLvku7cnICsgdGhpcy5kcnVnVG90YWxQcmljZSArICflhYMnDQogICAgICB9DQoNCiAgICAgIGlmICh0aGlzLmNoZWNrc0xpc3QubGVuZ3RoID4gMCkgew0KICAgICAgICB0aGlzLmZvcm0uY2hlY2tzID0gJycNCiAgICAgICAgdGhpcy5jaGVja3NMaXN0LmZvckVhY2godiA9PiB7DQogICAgICAgICAgdGhpcy5mb3JtLmNoZWNrcyArPSB2Lm5hbWUgKyAnKicgKyB2LnByaWNlICsgJyAnDQogICAgICAgIH0pDQogICAgICAgIHRoaXMuZm9ybS5jaGVja3MgKz0gJyDpobnnm67mgLvku7cnICsgdGhpcy5jaGVja3NUb3RhbFByaWNlICsgJ+WFgycNCiAgICAgIH0NCiAgICAgIHRoaXMuZm9ybS50b3RhbFByaWNlID0gdGhpcy5jaGVja3NUb3RhbFByaWNlICsgdGhpcy5kcnVnVG90YWxQcmljZQ0KICAgICAgdGhpcy5mb3JtLnN0YXRlID0gJzEnDQogICAgICB0aGlzLnJlcXVlc3QucG9zdCgnL3JlZ2lzdHJhdGlvbi9lZGl0JywgdGhpcy5mb3JtKS50aGVuKHJlcyA9PiB7DQogICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzIwMCcpIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aPkOS6pOaIkOWKnyEg6K+36YCa55+l5oKj6ICF55m75b2V57O757uf6Ieq5Yqp57y06LS577yBJykNCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3JlZ2lzdGVyVG9kYXknKQ0KDQogICAgICAgIH0NCiAgICAgIH0pDQoNCiAgICB9LA0KICAgIGhhbmRsZVNhdmUoKSB7DQogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2UNCiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+h5oGv5L+d5a2Y5oiQ5YqfJykNCiAgICB9LA0KICAgIGhhbmRsZUVkaXQoKSB7DQogICAgICB0aGlzLmZvcm0uZXRpb2xvZ3kgPSAnJw0KICAgICAgdGhpcy5mb3JtLmFkdmljZSA9ICcnDQogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gdHJ1ZQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["Deal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Deal.vue","sourceRoot":"src/views/doctor","sourcesContent":["<template>\r\n  <div>\r\n    <el-card>\r\n      <el-form :inline=\"true\" :model=\"form\" class=\"form\" size=\"medium\">\r\n        <el-form-item label=\"挂号单:\">\r\n          <el-input v-model=\"form.id\" :disabled=\"true\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"患者名称:\">\r\n          <el-input v-model=\"form.patientId\" :disabled=\"true\">\r\n            <template v-slot=\"scope\">\r\n              {{ scope.row.patient.name }}\r\n            </template>\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"年龄:\">\r\n          <el-input v-model=\"form.patient.age\" :disabled=\"true\">\r\n            <template v-slot=\"scope\">\r\n              {{ scope.row.patient.age }}\r\n            </template>\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"性别:\">\r\n          <el-input v-model=\"form.patient.gender\" :disabled=\"true\">\r\n            <template v-slot=\"scope\">\r\n              {{ scope.row.patient.gender }}\r\n            </template>\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item v-model=\"form.patient.phone\" label=\"联系方式:\">\r\n          <el-input :disabled=\"true\">\r\n            <template v-slot=\"scope\">\r\n              {{ scope.row.patient.phone }}\r\n            </template>\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item style=\"text-align:center;\">\r\n          <el-button type=\"primary\" @click=\"save\">提交</el-button>\r\n          <el-button type=\"primary\" @click=\"handleEdit\">病因填写</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n      <el-dialog title=\"报告\" :visible.sync=\"dialogFormVisible\" width=\"50%\">\r\n        <el-form :label-position=\"'top'\" label-width=\"80px\" size=\"small\">\r\n          <el-form-item label=\"病因\">\r\n            <el-input type=\"textarea\" :rows=\"5\" v-model=\"form.etiology\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"建议\">\r\n            <el-input type=\"textarea\" :rows=\"5\" v-model=\"form.advice\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"handleSave\">确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n\r\n      <el-row>\r\n        <div>\r\n          <el-col :span=\"24\">\r\n            <div style=\"margin: 10px 0\">\r\n              <el-input style=\"width: 200px\" placeholder=\"请输入名称\" suffix-icon=\"el-icon-search\"\r\n                        v-model=\"drugName\"></el-input>\r\n              <el-button class=\"ml-5\" type=\"primary\" @click=\"drugPage\">搜索</el-button>\r\n              <el-button type=\"warning\" @click=\"resetDrug\">重置</el-button>\r\n            </div>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n\r\n            <el-table :data=\"drugData\" border stripe max-height=\"240\" :header-cell-class-name=\"'headerBg'\">\r\n              <el-table-column prop=\"name\" label=\"名称\"></el-table-column>\r\n              <el-table-column prop=\"number\" label=\"数量\"></el-table-column>\r\n              <el-table-column prop=\"unit\" label=\"单位\"></el-table-column>\r\n              <el-table-column prop=\"price\" label=\"价格\"></el-table-column>\r\n              <el-table-column label=\"操作\" width=\"280\" align=\"center\">\r\n                <template v-slot=\"scope\">\r\n                  <el-button type=\"success\" v-if=\"scope.row.number > 0\" @click=\"appendDrug(scope.row)\"><i\r\n                      class=\"el-icon-circle-plus-outline\"></i> 增加\r\n                  </el-button>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n            <div style=\"padding: 10px 0\">\r\n              <el-pagination\r\n                  @size-change=\"handleDrugSizeChange\"\r\n                  @current-change=\"handleDrugCurrentChange\"\r\n                  :current-page=\"drugPageNum\"\r\n                  :page-sizes=\"[2, 4, 8, 10]\"\r\n                  :page-size=\"drugPageSize\"\r\n                  layout=\"total, sizes, prev, pager, next, jumper\"\r\n                  :total=\"drugTotal\">\r\n              </el-pagination>\r\n            </div>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-table :data=\"drugList\" border stripe max-height=\"200\" :header-cell-class-name=\"'headerBg'\">\r\n              <el-table-column prop=\"name\" label=\"名称\"></el-table-column>\r\n              <el-table-column prop=\"number\" label=\"数量\"></el-table-column>\r\n              <el-table-column prop=\"price\" label=\"价格\"></el-table-column>\r\n              <el-table-column prop=\"total\" label=\"小计\"></el-table-column>\r\n              <el-table-column label=\"操作\" width=\"280\" align=\"center\">\r\n                <template v-slot=\"scope\">\r\n                  <el-button type=\"danger\" @click=\"removeDrug(scope.row)\"><i class=\"el-icon-delete\"></i> 移除\r\n                  </el-button>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n            <div style=\"text-align:center;margin-top: 10px;\">\r\n              <el-tag>\r\n                总计: {{ drugTotalPrice }}元\r\n              </el-tag>\r\n            </div>\r\n          </el-col>\r\n        </div>\r\n        <div>\r\n          <el-col :span=\"24\">\r\n            <div style=\"margin: 10px 0\">\r\n              <el-input style=\"width: 200px\" placeholder=\"请输入名称\" suffix-icon=\"el-icon-search\"\r\n                        v-model=\"checksName\"></el-input>\r\n              <el-button class=\"ml-5\" type=\"primary\" @click=\"checksPage\">搜索</el-button>\r\n              <el-button type=\"warning\" @click=\"resetChecks\">重置</el-button>\r\n            </div>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-table :data=\"checksData\" border stripe max-height=\"240\" :header-cell-class-name=\"'headerBg'\">\r\n              <el-table-column prop=\"name\" label=\"名称\"></el-table-column>\r\n              <el-table-column prop=\"price\" label=\"价格\"></el-table-column>\r\n              <el-table-column label=\"操作\" width=\"280\" align=\"center\">\r\n                <template v-slot=\"scope\">\r\n                  <el-button type=\"success\" @click=\"appendChecks(scope.row)\"><i\r\n                      class=\"el-icon-circle-plus-outline\"></i> 增加\r\n                  </el-button>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n            <div style=\"padding: 10px 0\">\r\n              <el-pagination\r\n                  @size-change=\"handleChecksSizeChange\"\r\n                  @current-change=\"handleChecksCurrentChange\"\r\n                  :current-page=\"checksPageNum\"\r\n                  :page-sizes=\"[2, 4, 8, 10]\"\r\n                  :page-size=\"checksPageSize\"\r\n                  layout=\"total, sizes, prev, pager, next, jumper\"\r\n                  :total=\"checksTotal\">\r\n              </el-pagination>\r\n            </div>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-table :data=\"checksList\" border stripe max-height=\"200\" :header-cell-class-name=\"'headerBg'\">\r\n              <el-table-column prop=\"name\" label=\"名称\"></el-table-column>\r\n              <el-table-column prop=\"price\" label=\"价格\"></el-table-column>\r\n              <el-table-column label=\"操作\" width=\"280\" align=\"center\">\r\n                <template v-slot=\"scope\">\r\n                  <el-button type=\"danger\" @click=\"removeChecks(scope.row)\"><i class=\"el-icon-delete\"></i> 移除\r\n                  </el-button>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n            <div style=\"text-align:center;margin-top: 10px;\">\r\n              <el-tag>\r\n                总计: {{ checksTotalPrice }}元\r\n              </el-tag>\r\n            </div>\r\n          </el-col>\r\n        </div>\r\n      </el-row>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Deal\",\r\n  data() {\r\n    return {\r\n      form: this.$route.params.patient,\r\n      drugData: [],\r\n      drugList: [],\r\n      drugTotalPrice: 0,\r\n      drugTotal: 0,\r\n      drugPageNum: 1,\r\n      drugPageSize: 4,\r\n      drugName: \"\",\r\n      checksData: [],\r\n      checksList: [],\r\n      checksTotalPrice: 0,\r\n      checksTotal: 0,\r\n      checksPageNum: 1,\r\n      checksPageSize: 4,\r\n      checksName: \"\",\r\n      dialogFormVisible: false,\r\n    }\r\n  },\r\n  created() {\r\n    this.drugPage()\r\n    this.checksPage()\r\n    console.log()\r\n  },\r\n  methods: {\r\n    drugPage() {\r\n      this.request.get('/drug/page', {\r\n        params: {\r\n          pageNum: this.drugPageNum,\r\n          pageSize: this.drugPageSize,\r\n          name: this.drugName\r\n        }\r\n      }).then(res => {\r\n        this.drugData = res.data.records\r\n        this.drugTotal = res.data.total\r\n      })\r\n    },\r\n    resetDrug() {\r\n      this.drugName = \"\"\r\n      this.drugPage()\r\n    },\r\n    handleDrugSizeChange(pageSize) {\r\n      this.drugPageSize = pageSize\r\n      this.drugPage()\r\n    },\r\n    handleDrugCurrentChange(pageNum) {\r\n      this.drugPageNum = pageNum\r\n      this.drugPage()\r\n    },\r\n    appendDrug(row) {\r\n      let drug = this.drugList.find(v => v.id === row.id)\r\n      if (!drug) {\r\n        row.total = row.price\r\n        row.number = 1\r\n        this.drugList.push(row)\r\n      } else {\r\n        drug.number += 1\r\n        drug.total = drug.total + drug.price\r\n      }\r\n      this.drugTotalPrice = 0\r\n      this.drugList.forEach(v => {\r\n        this.drugTotalPrice += v.total\r\n      })\r\n    },\r\n    removeDrug(row) {\r\n      this.drugList.splice(this.drugList.indexOf(row), 1)\r\n      this.drugTotalPrice -= row.total\r\n    },\r\n    checksPage() {\r\n      this.request.get('/checks/page', {\r\n        params: {\r\n          pageNum: this.checksPageNum,\r\n          pageSize: this.checksPageSize,\r\n          name: this.checksName\r\n        }\r\n      }).then(res => {\r\n        this.checksData = res.data.records\r\n        this.checksTotal = res.data.total\r\n      })\r\n    },\r\n    resetChecks() {\r\n      this.checksName = \"\"\r\n      this.checksPage()\r\n    },\r\n    handleChecksSizeChange(pageSize) {\r\n      this.checksPageSize = pageSize\r\n      this.checksPage()\r\n    },\r\n    handleChecksCurrentChange(pageNum) {\r\n      this.checksPageNum = pageNum\r\n      this.checksPage()\r\n    },\r\n    appendChecks(row) {\r\n      this.checksList.push(row)\r\n\r\n      this.checksTotalPrice = 0\r\n      this.checksList.forEach(v => {\r\n        this.checksTotalPrice += v.price\r\n      })\r\n    },\r\n    removeChecks(row) {\r\n      this.checksList.splice(this.checksList.indexOf(row), 1)\r\n      this.checksTotalPrice -= row.price\r\n    },\r\n    save() {\r\n      if (this.drugList.length > 0) {\r\n        this.form.drug = ''\r\n        this.drugList.forEach(v => {\r\n          this.form.drug += v.name + '*' + v.price + '*' + v.number + ' '\r\n        })\r\n        this.form.drug += ' 药物总价' + this.drugTotalPrice + '元'\r\n      }\r\n\r\n      if (this.checksList.length > 0) {\r\n        this.form.checks = ''\r\n        this.checksList.forEach(v => {\r\n          this.form.checks += v.name + '*' + v.price + ' '\r\n        })\r\n        this.form.checks += ' 项目总价' + this.checksTotalPrice + '元'\r\n      }\r\n      this.form.totalPrice = this.checksTotalPrice + this.drugTotalPrice\r\n      this.form.state = '1'\r\n      this.request.post('/registration/edit', this.form).then(res => {\r\n        if (res.code === '200') {\r\n          this.$message.success('提交成功! 请通知患者登录系统自助缴费！')\r\n          this.$router.push('/registerToday')\r\n\r\n        }\r\n      })\r\n\r\n    },\r\n    handleSave() {\r\n      this.dialogFormVisible = false\r\n      this.$message.success('信息保存成功')\r\n    },\r\n    handleEdit() {\r\n      this.form.etiology = ''\r\n      this.form.advice = ''\r\n      this.dialogFormVisible = true\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.headerBg {\r\n  background: #eee !important;\r\n}\r\n</style>"]}]}